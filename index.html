<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bionic Hand Project</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f9f9f9;
    }
    header {
      background-color: #2c3e50;
      color: white;
      padding: 20px;
      text-align: center;
    }
    main {
      max-width: 900px;
      margin: 30px auto;
      padding: 0 20px;
      background: white;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      border-radius: 10px;
    }
    h2 {
      color: #2c3e50;
    }
    pre {
      background: #f0f0f0;
      padding: 15px;
      overflow-x: auto;
      border-radius: 5px;
    }
    textarea, input[type="text"] {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      box-sizing: border-box;
    }
    .comment {
      border-top: 1px solid #ddd;
      padding: 10px 0;
    }
    .reply {
      margin-left: 20px;
      border-left: 2px solid #eee;
      padding-left: 10px;
    }
    .comment img, .comment video {
      max-width: 100%;
      margin-top: 5px;
      border-radius: 5px;
    }
    button {
      background: #2980b9;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background: #3498db;
    }
  </style>
</head>
<body>
  <header>
    <h1>Bionic Hand Project</h1>
    <p><a href="https://gamma.app/docs/EMG--fxp1jqdan0hg2tt" style="color: #ecf0f1; text-decoration: underline;">üìé PPT ÎßÅÌÅ¨</a></p>
  </header>
  <main>
    <section>
      <h2>üîß Arduino Code</h2>
      <pre><code>#include &lt;Servo.h&gt;

Servo myServo;

const int sensorPin = A0;
const int averageSampleSize = 10;
int sensorReadings[averageSampleSize];
int index = 0;
long total = 0;

long threshold = 0;
const int hysteresis = 5;
const int thresholdOffset = 15;

bool isActivated = false;
int lastServoPosition = 0;
unsigned long lastToggleTime = 0;
const unsigned long debounceTime = 500;

void setup() {
  myServo.attach(9);
  Serial.begin(9600);
  myServo.write(0);
  delay(1000);

  for (int i = 0; i &lt; averageSampleSize; i++) {
    sensorReadings[i] = 0;
  }

  Serial.println("Pre-filling readings buffer...");
  for (int i = 0; i &lt; averageSampleSize; i++) {
    int val = analogRead(sensorPin);
    sensorReadings[i] = val;
    total += val;
    delay(20);
  }

  Serial.println("CALIBRATION: Relax your muscle for 5 seconds...");
  long sum = 0;
  int maxVal = 0;
  int minVal = 1023;
  const int calibrationSamples = 100;

  for (int i = 0; i &lt; calibrationSamples; i++) {
    int val = analogRead(sensorPin);
    sum += val;
    maxVal = max(maxVal, val);
    minVal = min(minVal, val);
    if (i % 10 == 0) {
      Serial.print("Sample ");
      Serial.print(i);
      Serial.print(": ");
      Serial.println(val);
    }
    delay(50);
  }

  long baseline = sum / calibrationSamples;
  int variance = maxVal - minVal;

  threshold = baseline + thresholdOffset;

  Serial.println("\n--- Calibration Results ---");
  Serial.print("Min value: ");
  Serial.println(minVal);
  Serial.print("Max value: ");
  Serial.println(maxVal);
  Serial.print("Baseline: ");
  Serial.println(baseline);
  Serial.print("Variance: ");
  Serial.println(variance);
  Serial.print("Threshold set to: ");
  Serial.println(threshold);
  Serial.println("-------------------------");
  Serial.println("Now flex your muscle to test!");
}

void loop() {
  int newValue = analogRead(sensorPin);

  total -= sensorReadings[index];
  sensorReadings[index] = newValue;
  total += sensorReadings[index];
  index = (index + 1) % averageSampleSize;

  int avgValue = total / averageSampleSize;

  Serial.print("Raw: ");
  Serial.print(newValue);
  Serial.print(" | Avg: ");
  Serial.print(avgValue);
  Serial.print(" | Threshold: ");
  Serial.print(threshold);

  unsigned long currentTime = millis();
  if (avgValue &gt; threshold &amp;&amp; !isActivated &amp;&amp; (currentTime - lastToggleTime &gt; debounceTime)) {
    toggleServo();
    isActivated = true;
    lastToggleTime = currentTime;
    Serial.print(" | ACTIVATED!");
  }

  if (avgValue &lt; (threshold - hysteresis)) {
    isActivated = false;
  }

  Serial.println();
  delay(50);
}

void toggleServo() {
  int target = (lastServoPosition == 0) ? 180 : 0;
  int step = (target &gt; lastServoPosition) ? 5 : -5;
  for (int pos = lastServoPosition; pos != target; pos += step) {
    myServo.write(pos);
    delay(15);
  }
  myServo.write(target);
  lastServoPosition = target;
  Serial.print("Servo toggled to: ");
  Serial.println(target);
}
</code></pre>
    </section>

    <section>
      <h2>üó®Ô∏è Leave a Comment</h2>
      <div id="comment-section"></div>
      <textarea id="comment-input" placeholder="Write a comment..."></textarea>
      <input type="file" id="media-input" multiple accept="image/*,video/*">
      <button onclick="addComment()">Post Comment</button>
    </section>
  </main>
  <script>
    function createMediaElements(files) {
      const mediaElements = [];
      for (const file of files) {
        const url = URL.createObjectURL(file);
        if (file.type.startsWith('image')) {
          mediaElements.push(`<img src="${url}" alt="uploaded image">`);
        } else if (file.type.startsWith('video')) {
          mediaElements.push(`<video controls src="${url}"></video>`);
        }
      }
      return mediaElements.join('');
    }

    function addComment(parentId = null) {
      const input = document.getElementById('comment-input');
      const mediaInput = document.getElementById('media-input');
      const commentText = input.value.trim();
      const files = mediaInput.files;
      if (!commentText && files.length === 0) return;

      const commentBox = document.createElement('div');
      commentBox.className = parentId ? 'comment reply' : 'comment';

      const mediaHTML = createMediaElements(files);
      commentBox.innerHTML = `<p>${commentText}</p>${mediaHTML}<button onclick="deleteComment(this)">Delete</button><button onclick="replyTo(this)">Reply</button>`;

      if (parentId) {
        parentId.appendChild(commentBox);
      } else {
        document.getElementById('comment-section').appendChild(commentBox);
      }

      input.value = '';
      mediaInput.value = '';
    }

    function replyTo(btn) {
      const parentComment = btn.parentElement;
      const replyInput = document.createElement('textarea');
      const replyMedia = document.createElement('input');
      replyMedia.type = 'file';
      replyMedia.multiple = true;
      replyMedia.accept = 'image/*,video/*';
      const replyBtn = document.createElement('button');
      replyBtn.textContent = 'Post Reply';
      replyBtn.onclick = () => {
        const tempInput = document.createElement('textarea');
        tempInput.value = replyInput.value;
        document.body.appendChild(tempInput);
        const mediaFakeInput = document.createElement('input');
        mediaFakeInput.files = replyMedia.files;
        addComment(parentComment);
        document.body.removeChild(tempInput);
      };
      parentComment.appendChild(replyInput);
      parentComment.appendChild(replyMedia);
      parentComment.appendChild(replyBtn);
      btn.disabled = true;
    }

    function deleteComment(btn) {
      btn.parentElement.remove();
    }
  </script>
</body>
</html>
